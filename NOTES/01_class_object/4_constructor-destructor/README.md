[MindMap](./constructor-destructor.png)

[demo](./demo.cpp)


# C++ 学习笔记：构造函数与析构函数 (Constructors & Destructors)

> 本笔记基于思维导图整理，旨在厘清 C++ 中对象生命周期管理的核心机制：**Setup (构造)** 与 **Cleanup (析构)**。

## 1. 构造函数 (Constructors)
构造函数是用于初始化对象的特殊成员函数。

### 核心特性 (Definition & Characteristics)
* **特殊方法**：在对象实例化时自动运行。
* **命名规则**：名称必须与类名完全一致。
* **无返回类型**：不返回任何值（包括 void）。

### 主要用途 (Main Uses)
* **初始化成员变量**：防止成员变量包含随机的垃圾内存值。
* **资源分配**：为对象分配必要的内存或设置初始状态。

### 类型 (Types)
1.  **默认构造函数 (Default)**：不带参数，通常不执行复杂操作或仅做默认初始化。
2.  **带参数构造函数 (Parameterized)**：支持函数重载，允许使用特定值初始化对象。
3.  **拷贝构造函数 (Copy)**：使用同类对象进行初始化。
4.  **移动构造函数 (Move)**：转移资源所有权（C++11 特性）。

### 禁止构造 (Prevent Construction)
如果不想让外部创建类的实例（例如单例模式或工具类），可以采取以下措施：
* 将其设为 `private`。
* 显式使用 `= delete` 删除构造函数。

---

## 2. 析构函数 (Destructors)
析构函数是对象生命周期结束时的清理者。

### 核心特性 (Definition & Characteristics)
* **命名规则**：以波浪号 `~` 开头，后跟类名（例如 `~MyClass`）。
* **触发时机**：在对象销毁时自动运行。
* **无参数**：不能有参数，也不能被重载。

### 主要用途 (Main Uses)
* **清理内存**：释放对象持有的资源。
* **反初始化**：执行必要的清理工作。
* **防止内存泄漏**：这是析构函数最重要的职责。

### 触发时机 (Trigger Timing)
* **栈分配 (Stack)**：当对象超出其作用域（Scope）时自动触发。
* **堆分配 (Heap)**：当显式调用 `delete` 关键字时触发。

---

## 3. 关键差异与总结 (Key Differences)
| 特性 | 构造函数 (Constructor) | 析构函数 (Destructor) |
| :--- | :--- | :--- |
| **核心职责** | **Setup**: 负责环境搭建 | **Cleanup**: 负责环境清理 |
| **执行时机** | 对象创建 (出生) | 对象销毁 (死亡) |
| **注意事项** | **C++ 不会自动初始化基本类型**，必须在构造函数中处理，否则会有脏数据。 | 必须确保释放所有动态申请的资源。 |