[MindMap](./static.png)

[demo](./demo.cpp)


# C++ 关键字详解：static

> **核心概念**：`static` 控制了变量/函数的**生命周期**（存在多久）和**可见性**（哪里能看到）。

## 1. 类/结构体 **内部** (Internal Scope)
当 `static` 用在 `class` 或 `struct` 内部时：

### 静态变量 (Static Variables)
* **共享内存**：所有实例共享同一份内存，不会随实例增加而重新分配。
* **定义规则**：通常需要在类外单独定义（分配存储空间）。
* **访问方式**：可以通过 `类名::变量名` 直接访问，也可以通过对象访问。

### 静态方法 (Static Methods)
* **独立性**：无需实例化对象即可调用。
* **限制**：
    * **没有 `this` 指针**。
    * **只能访问**静态成员（变量或函数），无法访问非静态成员。
* **用途**：处理与“类”相关（如计数器、工具函数），而非与“具体对象”相关的数据。

---

## 2. 类/结构体 **外部** (External Scope)
当 `static` 用在全局变量或普通函数前时：

### 内部链接性 (Internal Linkage)
* **可见性限制**：仅在当前编译单元（当前 `.cpp` 文件）可见。
* **隔离作用**：链接器不会去查找外部定义，防止与其他文件中的同名全局变量冲突。
* **优势**：
    * 防止命名冲突。
    * 提供类似“私有成员”的封装性。
    * 避免污染全局命名空间。

---

## 3. 关键对比
| 维度 | 普通成员 | 静态成员 (static) |
| :--- | :--- | :--- |
| **归属** | 属于具体的对象实例 | 属于类本身 |
| **内存** | 每个对象一份 | 所有对象共享一份 |

| 维度 | extern | static (外部) |
| :--- | :--- | :--- |
| **链接性** | 外部链接 (全局可见) | 内部链接 (仅当前文件可见) |